<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/report_preview_layout}">
<head>
    <title th:text="${report.name}"></title>

    <link rel="stylesheet" href="../../../../static/css/query-parameter.css"
          th:href="@{/css/query-parameter.css}"/>


    <script src="../../../../static/vendor/jquery/jquery.extension.js"
            th:src="@{'/vendor/jquery/jquery.extension.js?v='+${version}}"></script>


    <script src="../../../../static/vendor/underscore.js"
            th:src="@{'/vendor/underscore.js?v='+${version}}"></script>

    <script src="../../../../static/vendor/echarts.min.js"
            th:src="@{'/vendor/echarts.min.js?v='+${version}}"></script>

    <!-- jeDate 插件 -->
    <!--<link type="text/css" rel="stylesheet" href="../../../static/vendor/jeDate/test/jeDate-test.css"
          th:href="@{/vendor/jeDate/test/jeDate-test.css}"/>-->
    <link type="text/css" rel="stylesheet" href="../../../../static/vendor/jeDate/skin/jedate.css"
          th:href="@{/vendor/jeDate/skin/jedate.css}">
    <script type="text/javascript" src="../../../../static/vendor/jeDate/src/jedate.js"
            th:src="@{'/vendor/jeDate/src/jedate.js?v='+${version}}"></script>

    <!-- layui 插件 -->
    <link rel="stylesheet" href="../../../../static/vendor/layui-2.4.5/css/layui.css"
          th:href="@{/vendor/layui-2.4.5/css/layui.css}"/>
    <script src="../../../../static/vendor/layui-2.4.5/layui.js"
            th:src="@{'/vendor/layui-2.4.5/layui.js?v='+${version}}"></script>


    <!--基于zui的多选插件formSelects  改用zui代替-->
    <!--<link rel="stylesheet" href="../../../static/vendor/layui-select/dist/formSelects-v4.css"
          th:href="@{/vendor/layui-select/dist/formSelects-v4.css}" />
    <script src="../../../static/vendor/layui-select/dist/formSelects-v4.js"
            th:src="@{'/vendor/layui-select/dist/formSelects-v4.js?v='+${version}}"></script>-->


    <!-- zui 插件 -->
    <link type="text/css" rel="stylesheet" href="../../../../static/vendor/zui-1.8.1/css/zui.css"
          th:href="@{/vendor/zui-1.8.1/css/zui.css}">
    <script type="text/javascript" src="../../../../static/vendor/zui-1.8.1/js/zui.js"
            th:src="@{'/vendor/zui-1.8.1/js/zui.js?v='+${version}}"></script>
    <script src="../../../../static/js/utils/zuiMessager.js"
            th:src="@{'/js/utils/zuiMessager.js?v='+${version}}"></script>


    <!-- zui 选择插件 -->
    <link type="text/css" rel="stylesheet" href="../../../../static/vendor/zui-1.8.1/lib/chosen/chosen.css"
          th:href="@{/vendor/zui-1.8.1/lib/chosen/chosen.css}">
    <script type="text/javascript" src="../../../../static/vendor/zui-1.8.1/lib/chosen/chosen.min.js"
            th:src="@{'/vendor/zui-1.8.1/lib/chosen/chosen.min.js?v='+${version}}"></script>

    <script src="../../../../static/js/report/display/query-parameter.js"
            th:src="@{'/js/report/display/query-parameter.js?v='+${version}}"></script>

    <script src="../../../../static/js/report/display/chart/chartData.js"
            th:src="@{'/js/report/display/chart/chartData.js?v='+${version}}"></script>

    <script src="../../../../static/js/report/display/chart/pieChart.js"
            th:src="@{'/js/report/display/chart/pieChart.js?v='+${version}}"></script>


    <script th:inline="javascript">//引用
    var report = [[${report}]];//取值
    var uid = [[${report.uid}]];//取值

    console.log(report)
    </script>

</head>
<body layout:fragment="report-preview-content" style="min-width: 800px;min-height: 600px;">
<div class="">
    <input id="report-uid" type="hidden" name="uid" th:value="${report.uid}"/>


    <!-- 查询部分  start-->
    <div  style="width: 100%;">
        <div id="chart-report-params-div" class="fl" style="width: 100%;">
            <!-- 查询参数  start -->
            <form class="report-params-form" id="chart-report-params-form">
                <!-- url 中的参数  start -->
                <input th:each="requestParam:${requestParams}" type="hidden" th:name="${requestParam.key}"
                       th:value="${requestParam.value}"/>
                <!-- url 中的参数  end -->
            </form>
            <!-- 查询参数  end -->

            <!--查询按钮  start-->
            <div class="fl">
                <button class="btn btn-primary mt7 he30 mr10" type="button"
                        style="background: #009688;border: none;"
                        onclick="PieChartManageMVC.Controller.searchChartData();"><i class="icon icon-search"></i> 搜索
                </button>
            </div>

            <!-- 查看数据 start -->
            <div class="fl">
                <button class="btn btn-primary mt7 he30 mr10" type="button"
                        style="background: #009688;border: none;"
                        onclick="ChartDataMVC.Controller.showTableData();"><i class="icon icon-table"></i> 数据列表
                </button>
            </div>
            <!-- 查看数据 end -->

            <div class="fl">
                <button class="btn btn-primary mt7 he30 mr10" type="button" title="选择X轴、Y轴、图例生成图表"
                        style="background: #009688;border: none;"
                        onclick="PieChartManageMVC.Controller.createChart();"><i class="icon icon-pie-chart"></i> 图表
                </button>
            </div>
            <!--查询按钮  end-->
        </div>
    </div>
    <!-- 查询部分  end-->

</div>

<!--图表列选择部分  start-->
<div class="chart-option " style="clear: both;">
    <form class="report-params-form" id="chart-form">
        <!--X轴列选择部分  start-->
        <div class="mt5 ovh" style="clear: both">
            <div class="fl chart-label mt5" style="width: 80px;">X轴</div>
            <div id="chart-x-div" class="fl mt5"></div>
        </div>
        <!--X轴列选择部分  end-->

        <!--图例列选择部分  start-->
        <div class="mt5 "  style="clear: both">
            <div class="fl chart-label" style="width: 80px;">维度</div>
            <div id="chart-legend-div" class="fl"></div>
        </div>
        <!--图例列选择部分  end-->

        <!--Y轴列选择部分  start-->
        <div class="mt5 ovh" style="clear: both">
            <div class="fl chart-label mt5" style="width: 80px;">Y轴</div>
            <div id="chart-y-div" class="fl mt5"></div>
        </div>
        <!--Y轴列选择部分  end-->
    </form>

</div>
<!--图表列选择部分  end-->

<div id="table-report-data-div" class="data-div" style="width: 100%;clear: both">

    <div id="pie-report-table-data-div" style="padding: 1px;"></div>

    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="pieChart" style="height:400px"></div>

</div>

</body>
</html>