<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/report_preview_layout}">
<head>
    <title th:text="${report.name}"></title>

    <link rel="stylesheet" href="../../../static/css/query-parameter.css"
          th:href="@{/css/query-parameter.css}"/>


    <script src="../../../static/vendor/jquery/jquery.extension.js"
            th:src="@{'/vendor/jquery/jquery.extension.js?v='+${version}}"></script>

    <script src="../../../static/vendor/underscore.js"
            th:src="@{'/vendor/underscore.js?v='+${version}}"></script>


    <!-- jeDate 插件 -->
    <!--<link type="text/css" rel="stylesheet" href="../../../static/vendor/jeDate/test/jeDate-test.css"
          th:href="@{/vendor/jeDate/test/jeDate-test.css}"/>-->
    <link type="text/css" rel="stylesheet" href="../../../static/vendor/jeDate/skin/jedate.css"
          th:href="@{/vendor/jeDate/skin/jedate.css}">
    <script type="text/javascript" src="../../../static/vendor/jeDate/src/jedate.js"
            th:src="@{'/vendor/jeDate/src/jedate.js?v='+${version}}"></script>

    <!-- layui 插件 -->
    <link rel="stylesheet" href="../../../static/vendor/layui-2.4.5/css/layui.css"
          th:href="@{/vendor/layui-2.4.5/css/layui.css}"/>
    <script src="../../../static/vendor/layui-2.4.5/layui.js"
            th:src="@{'/vendor/layui-2.4.5/layui.js?v='+${version}}"></script>


    <!--基于zui的多选插件formSelects  改用zui代替-->
    <!--<link rel="stylesheet" href="../../../static/vendor/layui-select/dist/formSelects-v4.css"
          th:href="@{/vendor/layui-select/dist/formSelects-v4.css}" />
    <script src="../../../static/vendor/layui-select/dist/formSelects-v4.js"
            th:src="@{'/vendor/layui-select/dist/formSelects-v4.js?v='+${version}}"></script>-->


    <!-- zui 插件 -->
    <link type="text/css" rel="stylesheet" href="../../../static/vendor/zui-1.8.1/css/zui.css"
          th:href="@{/vendor/zui-1.8.1/css/zui.css}">
    <script type="text/javascript" src="../../../static/vendor/zui-1.8.1/js/zui.js"
            th:src="@{'/vendor/zui-1.8.1/js/zui.js?v='+${version}}"></script>

    <!-- zui 选择插件 -->
    <link type="text/css" rel="stylesheet" href="../../../static/vendor/zui-1.8.1/lib/chosen/chosen.css"
          th:href="@{/vendor/zui-1.8.1/lib/chosen/chosen.css}">
    <script type="text/javascript" src="../../../static/vendor/zui-1.8.1/lib/chosen/chosen.min.js"
            th:src="@{'/vendor/zui-1.8.1/lib/chosen/chosen.min.js?v='+${version}}"></script>

    <link type="text/css" rel="stylesheet"
          href="../../../static/vendor/zui-1.8.1/lib/datetimepicker/datetimepicker.min.css"
          th:href="@{/vendor/zui-1.8.1/lib/datetimepicker/datetimepicker.min.css}">
    <script type="text/javascript" src="../../../static/vendor/zui-1.8.1/lib/datetimepicker/datetimepicker.min.js"
            th:src="@{'/vendor/zui-1.8.1/lib/datetimepicker/datetimepicker.min.js?v='+${version}}"></script>

    <script src="../../../static/js/utils/zuiMessager.js"
            th:src="@{'/js/utils/zuiMessager.js?v='+${version}}"></script>


    <script src="../../../static/js/report/display/pivotTable.js"
            th:src="@{'/js/report/display/pivotTable.js?v=ss'+${version}}"></script>
    <script src="../../../static/js/report/display/query-parameter.js"
            th:src="@{'/js/report/display/query-parameter.js?v='+${version}}"></script>


    <script src="../../../static/vendor/jquery.fileDownload.js"
            th:src="@{'/vendor/jquery.fileDownload.js?v='+${version}}"></script>

    <!--
        <link rel="stylesheet" href="${ctxPath}/assets/vendor/layui/layui-selects/dist/formSelects-v4.css?v=${version}"
              media="all"/>
        <script src="${ctxPath}/assets/vendor/layui/layui-selects/dist/formSelects-v4.js?v=${version}?v=${version}"></script>
    -->


    <script th:inline="javascript">//引用
    var report = [[${report}]];//取值
    var uid = [[${report.uid}]];//取值

    console.log(report)
    console.log(uid)
    </script>

</head>
<body layout:fragment="report-preview-content" style="min-width: 800px;min-height: 600px;">
<div class="">
    <input id="report-uid" type="hidden" name="uid" th:value="${report.uid}"/>

    <!-- 查询部分  start-->
    <div  style="width: 100%;">
        <div id="pivot-table-report-params-div" class="fl" style="width: 100%;">
            <!-- 查询参数  start -->
            <form class="report-params-form" id="pivot-table-report-params-form">
                <!-- url 中的参数  start -->
                <input th:each="requestParam:${requestParams}" type="hidden" th:name="${requestParam.key}"
                       th:value="${requestParam.value}"/>
                <!-- url 中的参数  end -->
            </form>
            <!-- 查询参数  end -->

            <!--查询按钮  start-->
            <div class="fl">
                <button class="btn btn-primary mt7 he30 mr10" type="button"
                        style="background: #009688;border: none;"
                        onclick="PivotTableManageMVC.Controller.searchTableData();"><i class="icon icon-search"></i> 搜索
                </button>
            </div>
            <!--<div class="fl">
                <button class="btn mt7 he30 mr10" type="button"
                        onclick="PreviewManageMVC.Controller.clearQueryParams();">清空
                </button>
            </div>-->
            <div class="fl ">
                <div class="btn-group">
                    <button id="exportDataBtnGroup" type="button" class="btn dropdown-toggle  mt7 he30 mr10"
                            data-toggle="dropdown">导出
                        <span class="caret"></span></button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="exportDataBtnGroup"
                        style="min-width:75px;">
                        <li><a href="#" onclick="PivotTableManageMVC.Controller.exportReportData('excel');">Excel</a>
                        </li>
                        <li><a href="#" onclick="PivotTableManageMVC.Controller.exportReportData('csv');">CSV</a></li>
                    </ul>
                </div>
            </div>
            <!--查询按钮  end-->
        </div>
    </div>
    <!-- 查询部分  end-->

</div>



<!--透视表表列选择部分  start-->
<div class="pivot-table-option " style="clear: both;">
    <form class="report-params-form" id="pivot-table-attr-form">
        <!--行选择部分  start-->
        <div class="mt5 ovh" style="clear: both">
            <div class="fl chart-label mt5" style="width:30px;">行</div>
            <div id="pivot-table-row-div" class="fl mt5"></div>
        </div>
        <!--行选择部分  end-->

        <!--列选择部分  start-->
        <div class="mt5 "  style="clear: both">
            <div class="fl chart-label" style="width: 30px;">列</div>
            <div id="pivot-table-col-div" class="fl"></div>
        </div>
        <!--列选择部分  end-->

        <!--值选择部分  start-->
        <div class="mt5 ovh" style="clear: both">
            <div class="fl chart-label mt5" style="width: 30px;">值</div>
            <div id="pivot-table-val-div" class="fl mt5"></div>
        </div>
        <!--值选择部分  end-->

        <!--值选择部分  start-->
        <div class="mt5 ovh" style="clear: both">
            <div class="fl chart-label mt5" style="width: 30px;">函数</div>
            <div id="pivot-table-fun-div" class="fl mt5"></div>
        </div>
        <!--值选择部分  end-->

    </form>

</div>
<!--透视表表列选择部分  end-->

<div id="pivot-table-report-data-div" class="data-div" style="width: 100%;clear: both">

    <div id="pivot-table-report-table-data-div" style="padding: 1px;"></div>

</div>

</body>
</html>